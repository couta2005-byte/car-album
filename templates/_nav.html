<header class="header">
  <div class="header-inner">
    <!-- ロゴ -->
    <a href="/" class="logo">Carbum</a>

    <nav class="nav">
      <!-- 共通 -->
      <a href="/"
         class="nav-link {% if mode=='home' %}active{% endif %}">
        おすすめ
      </a>

      <a href="/search"
         class="nav-link {% if mode=='search' %}active{% endif %}">
        検索
      </a>

      {% if user %}
        <!-- ===== ログイン中 ===== -->
        <a href="/following"
           class="nav-link {% if mode=='following' %}active{% endif %}">
          フォロー中
        </a>

        <a href="/ranking?period=day"
           class="nav-link {% if mode.startswith('ranking') %}active{% endif %}">
          ランキング
        </a>

        <a href="/user/{{ user | urlencode }}"
           class="nav-link {% if mode=='profile' %}active{% endif %}">
          プロフィール
        </a>

        <form action="/logout" method="post" style="display:inline;">
          <button type="submit" class="logout-btn">
            ログアウト
          </button>
        </form>

      {% else %}
        <!-- ===== 未ログイン ===== -->
        <a href="/login" class="nav-link">
          ログイン
        </a>

        <a href="/register" class="nav-link">
          新規登録
        </a>
      {% endif %}
    </nav>
  </div>
</header>
