<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Ranking | Carbum</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/style.css?v=5">
</head>
<body>

{% include "_nav.html" %}

<main class="container">

  <div class="ranking-head">
    <div class="ranking-tabs">
      <a class="rank-tab {% if period=='day' %}active{% endif %}" href="/ranking?period=day">日</a>
      <a class="rank-tab {% if period=='week' %}active{% endif %}" href="/ranking?period=week">週</a>
      <a class="rank-tab {% if period=='month' %}active{% endif %}" href="/ranking?period=month">月</a>
    </div>

    <h2 class="ranking-title">{{ ranking_title or "ランキング" }}</h2>
  </div>

  <div class="ranking-list">
  {% for post in posts %}
    <article class="post rank-post">

      <!-- 1行目：順位 / ユーザー名：車名 / 時間 -->
      <div class="rank-top">
        <div class="rank-left">
          <div class="rank-badge">{{ loop.index }}</div>

          <div class="rank-meta">
            <div class="rank-name">
              <a href="/user/{{ post.username | urlencode }}" class="post-user">{{ post.username }}</a>
              <span class="post-sep">：</span>
              <span class="post-car">{{ post.car }}</span>
            </div>

            {% if post.comment %}
              <div class="rank-comment">{{ post.comment }}</div>
            {% endif %}
          </div>
        </div>

        <div class="rank-right">
          <div class="rank-time">{{ post.created_at }}</div>
          <div class="rank-like">
            ❤️ {{ post.likes }}
          </div>
        </div>
      </div>

      {% if post.image %}
        <div class="post-image">
          <img src="{{ post.image }}" alt="投稿画像">
        </div>
      {% endif %}

    </article>
  {% endfor %}
  </div>

</main>
</body>
</html>
