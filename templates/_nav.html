<header class="header">
  <div class="header-inner">
    <a href="/" class="logo">Carbum</a>

    <nav class="nav">
      <!-- ======================
           ホーム
      ====================== -->
      <a href="/"
         class="nav-link {% if mode=='home' %}active{% endif %}">
        ホーム
      </a>

      {% if user %}
        <!-- ======================
             DM（未読ドット対応）
        ====================== -->
        <a href="/dm"
           class="nav-link dm-nav {% if mode=='dm' %}active{% endif %}">
          DM
          {% if unread_dm %}
            <span class="dm-unread-dot"></span>
          {% endif %}
        </a>

        <!-- ======================
             ランキング
        ====================== -->
        <a href="/ranking?period=day"
           class="nav-link {% if mode.startswith('ranking') %}active{% endif %}">
          ランキング
        </a>

        <!-- ======================
             プロフィール（アイコン）
             ※ 文字は出さない
        ====================== -->
        <a href="/user/{{ user | urlencode }}"
           class="nav-link nav-icon {% if mode=='profile' %}active{% endif %}"
           aria-label="プロフィール">
          {% if profile and profile[4] %}
            <img src="{{ profile[4] }}" alt="icon" class="nav-avatar">
          {% else %}
            <span class="nav-avatar placeholder"></span>
          {% endif %}
        </a>

        <!-- ======================
             ログアウト
        ====================== -->
        <form action="/logout" method="post" class="logout-form">
          <button type="submit" class="logout-btn">ログアウト</button>
        </form>

      {% else %}
        <!-- 未ログイン -->
        <a href="/login" class="nav-link">ログイン</a>
        <a href="/register" class="nav-link">新規登録</a>
      {% endif %}
    </nav>
  </div>
</header>

<script src="/static/like.js?v=3000" defer></script>
